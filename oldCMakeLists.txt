cmake_minimum_required(VERSION 3.17)
project("Alien Maintenance")

set(CMAKE_MAKE_PROGRAM "C:\\Program Files\\mingw-w64\\x86_64-8.1.0-win32-seh-rt_v6-rev0\\mingw64\\bin\\mingw32-make.exe")

set(CMAKE_CXX_STANDARD 17)

set(EDITOR mapeditor)
set(CLIENT alienmaintenace)
set(SERVER mapeditor)

# for great people using Linux
if (UNIX)
    # set buiild output directory
    set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/../build)

    include_directories("source")
    # find previously installed sfml
    find_package(SFML 2.5 COMPONENTS graphics audio REQUIRED)

    # create executable and link libs
    add_executable(${EDITOR} source/mapeditor.cpp)
    target_link_libraries(${EDITOR} sfml-graphics)

    add_executable(${CLIENT} source/alienmaintenance.cpp)
    target_link_libraries(${CLIENT} sfml-graphics)
endif (UNIX)

# for great people using Windows
if (MSVC)
    # set buiild output directory for VS configurations
    set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELEASE ${CMAKE_BINARY_DIR}/../build)
    set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_DEBUG ${CMAKE_BINARY_DIR}/../build)

    include_directories("source")

    # add include dirs and libs because we are on Windows ad have problems with packages
    # it may not work :)
    include_directories("C:\\SFML-2.5.1\\include")
    find_library(SFMLGRAPHICS NAMES sfml-graphics.lib PATHS "C:\\SFML-2.5.1\\lib")
    find_library(SFMLWINDOW NAMES sfml-window.lib PATHS "C:\\SFML-2.5.1\\lib")
    find_library(SFMLSYSTEM NAMES sfml-system.lib PATHS "C:\\SFML-2.5.1\\lib")

    # create executable and link
    add_executable(${EDITOR} source/mapeditor.cpp)
    target_link_libraries(${EDITOR} ${SFMLGRAPHICS} ${SFMLWINDOW} ${SFMLSYSTEM})

    add_executable(${CLIENT} source/alienmaintenance.cpp)
    target_link_libraries(${CLIENT} ${SFMLGRAPHICS} ${SFMLWINDOW} ${SFMLSYSTEM})
endif(MSVC)
